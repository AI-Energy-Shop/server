(self.webpackChunkbackend=self.webpackChunkbackend||[]).push([[3578],{8559:(W,b,r)=>{"use strict";r.d(b,{A:()=>E});var d=r(68093),L=r.n(d),j=r(87438),P=r.n(j),h=P()(L());h.push([W.id,`.apollo-sandbox-wrapper {
  height: 100vh;
}

.apollo-sandbox {
  height: 100%;
}
`,""]);const E=h},46283:(W,b,r)=>{"use strict";r.r(b),r.d(b,{default:()=>wn});var d=r(92132),L=r(17703),j=r(55506),P=r(6598),h=r(85072),E=r.n(h),o=r(97825),p=r.n(o),u=r(77659),k=r.n(u),U=r(55056),A=r.n(U),n=r(10540),t=r.n(n),c=r(41113),y=r.n(c),g=r(8559),O={};O.styleTagTransform=y(),O.setAttributes=A(),O.insert=k().bind(null,"head"),O.domAPI=p(),O.insertStyleElement=t();var l=E()(g.A,O);const f=g.A&&g.A.locals?g.A.locals:void 0;var T=r(21272),M=r(92823);function I(e,i){var s=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(s)return(s=s.call(e)).next.bind(s);if(Array.isArray(e)||(s=J(e))||i&&e&&typeof e.length=="number"){s&&(e=s);var a=0;return function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function J(e,i){if(e){if(typeof e=="string")return te(e,i);var s=Object.prototype.toString.call(e).slice(8,-1);if(s==="Object"&&e.constructor&&(s=e.constructor.name),s==="Map"||s==="Set")return Array.from(e);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return te(e,i)}}function te(e,i){(i==null||i>e.length)&&(i=e.length);for(var s=0,a=new Array(i);s<i;s++)a[s]=e[s];return a}function ne(e,i){for(var s=0;s<i.length;s++){var a=i[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function F(e,i,s){return i&&ne(e.prototype,i),s&&ne(e,s),e}var q=function(){return typeof Symbol=="function"},se=function(e){return q()&&Boolean(Symbol[e])},le=function(e){return se(e)?Symbol[e]:"@@"+e};q()&&!se("observable")&&(Symbol.observable=Symbol("observable"));var Oe=le("iterator"),Ee=le("observable"),he=le("species");function be(e,i){var s=e[i];if(s!=null){if(typeof s!="function")throw new TypeError(s+" is not a function");return s}}function ve(e){var i=e.constructor;return i!==void 0&&(i=i[he],i===null&&(i=void 0)),i!==void 0?i:Ue}function De(e){return e instanceof Ue}function Te(e){Te.log?Te.log(e):setTimeout(function(){throw e})}function Ie(e){Promise.resolve().then(function(){try{e()}catch(i){Te(i)}})}function Fe(e){var i=e._cleanup;if(i!==void 0&&(e._cleanup=void 0,!!i))try{if(typeof i=="function")i();else{var s=be(i,"unsubscribe");s&&s.call(i)}}catch(a){Te(a)}}function Ae(e){e._observer=void 0,e._queue=void 0,e._state="closed"}function Qe(e){var i=e._queue;if(i){e._queue=void 0,e._state="ready";for(var s=0;s<i.length&&(qe(e,i[s].type,i[s].value),e._state!=="closed");++s);}}function qe(e,i,s){e._state="running";var a=e._observer;try{var m=be(a,i);switch(i){case"next":m&&m.call(a,s);break;case"error":if(Ae(e),m)m.call(a,s);else throw s;break;case"complete":Ae(e),m&&m.call(a);break}}catch(S){Te(S)}e._state==="closed"?Fe(e):e._state==="running"&&(e._state="ready")}function Be(e,i,s){if(e._state!=="closed"){if(e._state==="buffering"){e._queue.push({type:i,value:s});return}if(e._state!=="ready"){e._state="buffering",e._queue=[{type:i,value:s}],Ie(function(){return Qe(e)});return}qe(e,i,s)}}var st=function(){function e(s,a){this._cleanup=void 0,this._observer=s,this._queue=void 0,this._state="initializing";var m=new at(this);try{this._cleanup=a.call(void 0,m)}catch(S){m.error(S)}this._state==="initializing"&&(this._state="ready")}var i=e.prototype;return i.unsubscribe=function(){this._state!=="closed"&&(Ae(this),Fe(this))},F(e,[{key:"closed",get:function(){return this._state==="closed"}}]),e}(),at=function(){function e(s){this._subscription=s}var i=e.prototype;return i.next=function(a){Be(this._subscription,"next",a)},i.error=function(a){Be(this._subscription,"error",a)},i.complete=function(){Be(this._subscription,"complete")},F(e,[{key:"closed",get:function(){return this._subscription._state==="closed"}}]),e}(),Ue=function(){function e(s){if(!(this instanceof e))throw new TypeError("Observable cannot be called as a function");if(typeof s!="function")throw new TypeError("Observable initializer must be a function");this._subscriber=s}var i=e.prototype;return i.subscribe=function(a){return(typeof a!="object"||a===null)&&(a={next:a,error:arguments[1],complete:arguments[2]}),new st(a,this._subscriber)},i.forEach=function(a){var m=this;return new Promise(function(S,v){if(typeof a!="function"){v(new TypeError(a+" is not a function"));return}function w(){N.unsubscribe(),S()}var N=m.subscribe({next:function(C){try{a(C,w)}catch(_){v(_),N.unsubscribe()}},error:v,complete:S})})},i.map=function(a){var m=this;if(typeof a!="function")throw new TypeError(a+" is not a function");var S=ve(this);return new S(function(v){return m.subscribe({next:function(w){try{w=a(w)}catch(N){return v.error(N)}v.next(w)},error:function(w){v.error(w)},complete:function(){v.complete()}})})},i.filter=function(a){var m=this;if(typeof a!="function")throw new TypeError(a+" is not a function");var S=ve(this);return new S(function(v){return m.subscribe({next:function(w){try{if(!a(w))return}catch(N){return v.error(N)}v.next(w)},error:function(w){v.error(w)},complete:function(){v.complete()}})})},i.reduce=function(a){var m=this;if(typeof a!="function")throw new TypeError(a+" is not a function");var S=ve(this),v=arguments.length>1,w=!1,N=arguments[1],C=N;return new S(function(_){return m.subscribe({next:function(D){var x=!w;if(w=!0,!x||v)try{C=a(C,D)}catch(R){return _.error(R)}else C=D},error:function(D){_.error(D)},complete:function(){if(!w&&!v)return _.error(new TypeError("Cannot reduce an empty sequence"));_.next(C),_.complete()}})})},i.concat=function(){for(var a=this,m=arguments.length,S=new Array(m),v=0;v<m;v++)S[v]=arguments[v];var w=ve(this);return new w(function(N){var C,_=0;function D(x){C=x.subscribe({next:function(R){N.next(R)},error:function(R){N.error(R)},complete:function(){_===S.length?(C=void 0,N.complete()):D(w.from(S[_++]))}})}return D(a),function(){C&&(C.unsubscribe(),C=void 0)}})},i.flatMap=function(a){var m=this;if(typeof a!="function")throw new TypeError(a+" is not a function");var S=ve(this);return new S(function(v){var w=[],N=m.subscribe({next:function(_){if(a)try{_=a(_)}catch(x){return v.error(x)}var D=S.from(_).subscribe({next:function(x){v.next(x)},error:function(x){v.error(x)},complete:function(){var x=w.indexOf(D);x>=0&&w.splice(x,1),C()}});w.push(D)},error:function(_){v.error(_)},complete:function(){C()}});function C(){N.closed&&w.length===0&&v.complete()}return function(){w.forEach(function(_){return _.unsubscribe()}),N.unsubscribe()}})},i[Ee]=function(){return this},e.from=function(a){var m=typeof this=="function"?this:e;if(a==null)throw new TypeError(a+" is not an object");var S=be(a,Ee);if(S){var v=S.call(a);if(Object(v)!==v)throw new TypeError(v+" is not an object");return De(v)&&v.constructor===m?v:new m(function(w){return v.subscribe(w)})}if(se("iterator")&&(S=be(a,Oe),S))return new m(function(w){Ie(function(){if(!w.closed){for(var N=I(S.call(a)),C;!(C=N()).done;){var _=C.value;if(w.next(_),w.closed)return}w.complete()}})});if(Array.isArray(a))return new m(function(w){Ie(function(){if(!w.closed){for(var N=0;N<a.length;++N)if(w.next(a[N]),w.closed)return;w.complete()}})});throw new TypeError(a+" is not observable")},e.of=function(){for(var a=arguments.length,m=new Array(a),S=0;S<a;S++)m[S]=arguments[S];var v=typeof this=="function"?this:e;return new v(function(w){Ie(function(){if(!w.closed){for(var N=0;N<m.length;++N)if(w.next(m[N]),w.closed)return;w.complete()}})})},F(e,null,[{key:he,get:function(){return this}}]),e}();q()&&Object.defineProperty(Ue,Symbol("extensions"),{value:{symbol:Ee,hostReportError:Te},configurable:!0});var ct=r(22912);function fe(e){return e===null?"null":Array.isArray(e)?"array":typeof e}function Se(e){return fe(e)==="object"}function In(e){return typeof Object(e)[Symbol.asyncIterator]=="function"}function _n(e){return Se(e)&&typeof Object(e)[Symbol.asyncIterator]=="function"&&typeof e.return=="function"}function ut(e){return Array.isArray(e)&&e.length>0&&e.every(i=>"message"in i)}function ze(e,i){return e.length<124?e:i}const lt="graphql-transport-ws",Nn="graphql-ws";var me;(function(e){e[e.InternalServerError=4500]="InternalServerError",e[e.InternalClientError=4005]="InternalClientError",e[e.BadRequest=4400]="BadRequest",e[e.BadResponse=4004]="BadResponse",e[e.Unauthorized=4401]="Unauthorized",e[e.Forbidden=4403]="Forbidden",e[e.SubprotocolNotAcceptable=4406]="SubprotocolNotAcceptable",e[e.ConnectionInitialisationTimeout=4408]="ConnectionInitialisationTimeout",e[e.ConnectionAcknowledgementTimeout=4504]="ConnectionAcknowledgementTimeout",e[e.SubscriberAlreadyExists=4409]="SubscriberAlreadyExists",e[e.TooManyInitialisationRequests=4429]="TooManyInitialisationRequests"})(me||(me={}));var Z;(function(e){e.ConnectionInit="connection_init",e.ConnectionAck="connection_ack",e.Ping="ping",e.Pong="pong",e.Subscribe="subscribe",e.Next="next",e.Error="error",e.Complete="complete"})(Z||(Z={}));function We(e){if(!Se(e))throw new Error(`Message is expected to be an object, but got ${fe(e)}`);if(!e.type)throw new Error("Message is missing the 'type' property");if(typeof e.type!="string")throw new Error(`Message is expects the 'type' property to be a string, but got ${fe(e.type)}`);switch(e.type){case Z.ConnectionInit:case Z.ConnectionAck:case Z.Ping:case Z.Pong:{if(e.payload!=null&&!Se(e.payload))throw new Error(`"${e.type}" message expects the 'payload' property to be an object or nullish or missing, but got "${e.payload}"`);break}case Z.Subscribe:{if(typeof e.id!="string")throw new Error(`"${e.type}" message expects the 'id' property to be a string, but got ${fe(e.id)}`);if(!e.id)throw new Error(`"${e.type}" message requires a non-empty 'id' property`);if(!Se(e.payload))throw new Error(`"${e.type}" message expects the 'payload' property to be an object, but got ${fe(e.payload)}`);if(typeof e.payload.query!="string")throw new Error(`"${e.type}" message payload expects the 'query' property to be a string, but got ${fe(e.payload.query)}`);if(e.payload.variables!=null&&!Se(e.payload.variables))throw new Error(`"${e.type}" message payload expects the 'variables' property to be a an object or nullish or missing, but got ${fe(e.payload.variables)}`);if(e.payload.operationName!=null&&fe(e.payload.operationName)!=="string")throw new Error(`"${e.type}" message payload expects the 'operationName' property to be a string or nullish or missing, but got ${fe(e.payload.operationName)}`);if(e.payload.extensions!=null&&!Se(e.payload.extensions))throw new Error(`"${e.type}" message payload expects the 'extensions' property to be a an object or nullish or missing, but got ${fe(e.payload.extensions)}`);break}case Z.Next:{if(typeof e.id!="string")throw new Error(`"${e.type}" message expects the 'id' property to be a string, but got ${fe(e.id)}`);if(!e.id)throw new Error(`"${e.type}" message requires a non-empty 'id' property`);if(!Se(e.payload))throw new Error(`"${e.type}" message expects the 'payload' property to be an object, but got ${fe(e.payload)}`);break}case Z.Error:{if(typeof e.id!="string")throw new Error(`"${e.type}" message expects the 'id' property to be a string, but got ${fe(e.id)}`);if(!e.id)throw new Error(`"${e.type}" message requires a non-empty 'id' property`);if(!ut(e.payload))throw new Error(`"${e.type}" message expects the 'payload' property to be an array of GraphQL errors, but got ${JSON.stringify(e.payload)}`);break}case Z.Complete:{if(typeof e.id!="string")throw new Error(`"${e.type}" message expects the 'id' property to be a string, but got ${fe(e.id)}`);if(!e.id)throw new Error(`"${e.type}" message requires a non-empty 'id' property`);break}default:throw new Error(`Invalid message 'type' property "${e.type}"`)}return e}function xn(e){try{return We(e),!0}catch{return!1}}function ft(e,i){return We(typeof e=="string"?JSON.parse(e,i):e)}function Re(e,i){return We(e),JSON.stringify(e,i)}var Ce=function(e){return this instanceof Ce?(this.v=e,this):new Ce(e)},dt=function(e,i,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=s.apply(e,i||[]),m,S=[];return m={},v("next"),v("throw"),v("return"),m[Symbol.asyncIterator]=function(){return this},m;function v(x){a[x]&&(m[x]=function(R){return new Promise(function(Y,H){S.push([x,R,Y,H])>1||w(x,R)})})}function w(x,R){try{N(a[x](R))}catch(Y){D(S[0][3],Y)}}function N(x){x.value instanceof Ce?Promise.resolve(x.value.v).then(C,_):D(S[0][2],x)}function C(x){w("next",x)}function _(x){w("throw",x)}function D(x,R){x(R),S.shift(),S.length&&w(S[0][0],S[0][1])}};function pt(e){const{url:i,connectionParams:s,lazy:a=!0,onNonLazyError:m=console.error,lazyCloseTimeout:S=0,keepAlive:v=0,disablePong:w,connectionAckWaitTimeout:N=0,retryAttempts:C=5,retryWait:_=async function(X){let G=1e3;for(let $=0;$<X;$++)G*=2;await new Promise($=>setTimeout($,G+Math.floor(Math.random()*(3e3-300)+300)))},shouldRetry:D=Ve,isFatalConnectionProblem:x,on:R,webSocketImpl:Y,generateID:H=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,X=>{const G=Math.random()*16|0;return(X=="x"?G:G&3|8).toString(16)})},jsonMessageReplacer:ee,jsonMessageReviver:re}=e;let de;if(Y){if(!mt(Y))throw new Error("Invalid WebSocket implementation provided");de=Y}else typeof WebSocket<"u"?de=WebSocket:typeof global<"u"?de=global.WebSocket||global.MozWebSocket:typeof window<"u"&&(de=window.WebSocket||window.MozWebSocket);if(!de)throw new Error("WebSocket implementation missing; on Node you can `import WebSocket from 'ws';` and pass `webSocketImpl: WebSocket` to `createClient`");const ue=de,Q=(()=>{const B=(()=>{const G={};return{on($,K){return G[$]=K,()=>{delete G[$]}},emit($){var K;"id"in $&&((K=G[$.id])===null||K===void 0||K.call(G,$))}}})(),X={connecting:R?.connecting?[R.connecting]:[],opened:R?.opened?[R.opened]:[],connected:R?.connected?[R.connected]:[],ping:R?.ping?[R.ping]:[],pong:R?.pong?[R.pong]:[],message:R?.message?[B.emit,R.message]:[B.emit],closed:R?.closed?[R.closed]:[],error:R?.error?[R.error]:[]};return{onMessage:B.on,on(G,$){const K=X[G];return K.push($),()=>{K.splice(K.indexOf($),1)}},emit(G,...$){for(const K of[...X[G]])K(...$)}}})();function ge(B){const X=[Q.on("error",G=>{X.forEach($=>$()),B(G)}),Q.on("closed",G=>{X.forEach($=>$()),B(G)})]}let ae,ye=0,V,xe=!1,He=0,nt=!1;async function it(){clearTimeout(V);const[B,X]=await(ae??(ae=new Promise((K,pe)=>(async()=>{if(xe){if(await _(He),!ye)return ae=void 0,pe({code:1e3,reason:"All Subscriptions Gone"});He++}Q.emit("connecting",xe);const z=new ue(typeof i=="function"?await i():i,lt);let we,je;function Ge(){isFinite(v)&&v>0&&(clearTimeout(je),je=setTimeout(()=>{z.readyState===ue.OPEN&&(z.send(Re({type:Z.Ping})),Q.emit("ping",!1,void 0))},v))}ge(ce=>{ae=void 0,clearTimeout(we),clearTimeout(je),pe(ce),ce instanceof Je&&(z.close(4499,"Terminated"),z.onerror=null,z.onclose=null)}),z.onerror=ce=>Q.emit("error",ce),z.onclose=ce=>Q.emit("closed",ce),z.onopen=async()=>{try{Q.emit("opened",z);const ce=typeof s=="function"?await s():s;if(z.readyState!==ue.OPEN)return;z.send(Re(ce?{type:Z.ConnectionInit,payload:ce}:{type:Z.ConnectionInit},ee)),isFinite(N)&&N>0&&(we=setTimeout(()=>{z.close(me.ConnectionAcknowledgementTimeout,"Connection acknowledgement timeout")},N)),Ge()}catch(ce){Q.emit("error",ce),z.close(me.InternalClientError,ze(ce instanceof Error?ce.message:new Error(ce).message,"Internal client error"))}};let Pe=!1;z.onmessage=({data:ce})=>{try{const oe=ft(ce,re);if(Q.emit("message",oe),oe.type==="ping"||oe.type==="pong"){Q.emit(oe.type,!0,oe.payload),oe.type==="pong"?Ge():w||(z.send(Re(oe.payload?{type:Z.Pong,payload:oe.payload}:{type:Z.Pong})),Q.emit("pong",!1,oe.payload));return}if(Pe)return;if(oe.type!==Z.ConnectionAck)throw new Error(`First message cannot be of type ${oe.type}`);clearTimeout(we),Pe=!0,Q.emit("connected",z,oe.payload,xe),xe=!1,He=0,K([z,new Promise((An,On)=>ge(On))])}catch(oe){z.onmessage=null,Q.emit("error",oe),z.close(me.BadResponse,ze(oe instanceof Error?oe.message:new Error(oe).message,"Bad response"))}}})())));B.readyState===ue.CLOSING&&await X;let G=()=>{};const $=new Promise(K=>G=K);return[B,G,Promise.race([$.then(()=>{if(!ye){const K=()=>B.close(1e3,"Normal Closure");isFinite(S)&&S>0?V=setTimeout(()=>{B.readyState===ue.OPEN&&K()},S):K()}}),X])]}function rt(B){if(Ve(B)&&(ht(B.code)||[me.InternalServerError,me.InternalClientError,me.BadRequest,me.BadResponse,me.Unauthorized,me.SubprotocolNotAcceptable,me.SubscriberAlreadyExists,me.TooManyInitialisationRequests].includes(B.code)))throw B;if(nt)return!1;if(Ve(B)&&B.code===1e3)return ye>0;if(!C||He>=C||!D(B)||x?.(B))throw B;return xe=!0}a||(async()=>{for(ye++;;)try{const[,,B]=await it();await B}catch(B){try{if(!rt(B))return}catch(X){return m?.(X)}}})();function ot(B,X){const G=H(B);let $=!1,K=!1,pe=()=>{ye--,$=!0};return(async()=>{for(ye++;;)try{const[z,we,je]=await it();if($)return we();const Ge=Q.onMessage(G,Pe=>{switch(Pe.type){case Z.Next:{X.next(Pe.payload);return}case Z.Error:{K=!0,$=!0,X.error(Pe.payload),pe();return}case Z.Complete:{$=!0,pe();return}}});z.send(Re({id:G,type:Z.Subscribe,payload:B},ee)),pe=()=>{!$&&z.readyState===ue.OPEN&&z.send(Re({id:G,type:Z.Complete},ee)),ye--,$=!0,we()},await je.finally(Ge);return}catch(z){if(!rt(z))return}})().then(()=>{K||X.complete()}).catch(z=>{X.error(z)}),()=>{$||pe()}}return{on:Q.on,subscribe:ot,iterate(B){const X=[],G={done:!1,error:null,resolve:()=>{}},$=ot(B,{next(pe){X.push(pe),G.resolve()},error(pe){G.done=!0,G.error=pe,G.resolve()},complete(){G.done=!0,G.resolve()}}),K=function(){return dt(this,arguments,function*(){for(;;){for(X.length||(yield Ce(new Promise(we=>G.resolve=we)));X.length;)yield yield Ce(X.shift());if(G.error)throw G.error;if(G.done)return yield Ce(void 0)}})}();return K.throw=async pe=>(G.done||(G.done=!0,G.error=pe,G.resolve()),{done:!0,value:void 0}),K.return=async()=>($(),{done:!0,value:void 0}),K},async dispose(){if(nt=!0,ae){const[B]=await ae;B.close(1e3,"Normal Closure")}},terminate(){ae&&Q.emit("closed",new Je)}}}class Je extends Error{constructor(){super(...arguments),this.name="TerminatedCloseEvent",this.message="4499: Terminated",this.code=4499,this.reason="Terminated",this.wasClean=!1}}function Ve(e){return Se(e)&&"code"in e&&"reason"in e}function ht(e){return[1e3,1001,1006,1005,1012,1013,1014].includes(e)?!1:e>=1e3&&e<=1999}function mt(e){return typeof e=="function"&&"constructor"in e&&"CLOSED"in e&&"CLOSING"in e&&"CONNECTING"in e&&"OPEN"in e}var yt=r(21680);const Ke=(e=!1)=>e?"https://embed.apollo.local:3000/sandbox/explorer":"https://sandbox.embed.apollographql.com/sandbox/explorer",Xe="SchemaError",vt="SchemaResponse",gt="ExplorerRequest",Me="ExplorerResponse",bt="ExplorerSubscriptionRequest",_e="ExplorerSubscriptionResponse",Et="ExplorerSubscriptionTermination",Tt="ExplorerSetSocketError",Ye="ExplorerSetSocketStatus",Ze=e=>`apollo-embed-${e}`,St="ExplorerListeningForHandshake",wt="HandshakeResponse",Ot="SetPartialAuthenticationTokenForParent",It="TriggerLogoutInParent",_t="ExplorerListeningForPartialToken",Nt="PartialAuthenticationTokenResponse",xt="PreflightOAuthRequest",At="PreflightOAuthProviderResponse",Ct="PreflightOAuthResponse",Pt="IntrospectionQueryWithHeaders",Rt="ParentLogoutSuccess",Mt=({legacyIncludeCookies:e})=>(s,a)=>fetch(s,Object.assign(Object.assign({},a),e?{credentials:"include"}:e!==void 0?{credentials:"omit"}:{}));/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function ke(e,i,s,a){function m(S){return S instanceof s?S:new s(function(v){v(S)})}return new(s||(s=Promise))(function(S,v){function w(_){try{C(a.next(_))}catch(D){v(D)}}function N(_){try{C(a.throw(_))}catch(D){v(D)}}function C(_){_.done?S(_.value):m(_.value).then(w,N)}C((a=a.apply(e,i||[])).next())})}function kt(e,i){if(e.body===null)throw new Error("Missing body");if(typeof e.body.tee!="function")throw new Error("Streaming bodies not supported by provided fetch implementation");const s=new TextDecoder("utf-8");let a="";const m=`--${i.parameters.get("boundary")||"-"}`,S="--graphql--",v=e.body.getReader();return{closeReadableStream:()=>v.cancel(),observable:new Ue(w=>{function N(){v.read().then(C=>{var _,D,x;if(C.done){(_=w.complete)===null||_===void 0||_.call(w);return}const R=s.decode(C.value);a+=R;let Y=a.indexOf(m);for(;Y>-1;){const H=a.slice(0,Y);if(a=a.slice(Y+m.length),H.trim()){const ee=`\r
\r
`;let re;if(H.lastIndexOf(ee)!==H.indexOf(ee)){const Q=H.indexOf(ee)+ee.length;re=H.substring(Q).indexOf(ee)+Q}else re=H.indexOf(ee);const de=Object.fromEntries(H.slice(0,re).split(`
`).map(Q=>{const ge=Q.indexOf(":");if(ge>-1){const ae=Q.slice(0,ge).trim(),ye=Q.slice(ge+1).trim();return[ae,ye]}else return null}).filter(Q=>!!Q));if(((D=de["content-type"])===null||D===void 0?void 0:D.toLowerCase().indexOf("application/json"))===-1)throw new Error("Unsupported patch content type");const ue=H.slice(re);try{(x=w.next)===null||x===void 0||x.call(w,Object.assign({data:JSON.parse(ue),headers:de,size:R.length},R.indexOf(S)>-1?{shouldTerminate:!0}:{}))}catch(Q){throw Q}}Y=a.indexOf(m)}N()}).catch(C=>{var _,D;C.name!=="AbortError"&&(C.result&&C.result.errors&&C.result.data&&((_=w.next)===null||_===void 0||_.call(w,{data:C.result,size:1/0})),(D=w.error)===null||D===void 0||D.call(w,C))})}N()})}}const Lt=(e,i)=>{let s;try{s=JSON.stringify(e)}catch{throw new Error(`Network request failed. ${i} is not serializable`)}return s},jt=({fileVariables:e,requestBody:i})=>ke(void 0,void 0,void 0,function*(){const s=e.map(N=>Object.assign(Object.assign({},N),{files:N.files.map(({arrayBuffer:C,fileName:_})=>new File([new Blob([C])],_))})),a={};let m=0;const S=[];let v=i.variables;s.forEach(({files:N,variableKey:C,isMultiFile:_},D)=>{N?.length&&(v=Object.assign(Object.assign({},v),{[C]:_?new Array(N.length).fill(null):null}),Array.from(N).forEach(x=>{a[m]=[`${s.length>1?`${D}.`:""}variables.${C}${_?`.${m}`:""}`],S.push([m.toString(),x,x.name]),m++}))});const w=new FormData;return w.append("operations",Lt({query:i.query,operationName:i.operationName,variables:v},"Payload")),w.append("map",JSON.stringify(a)),S.forEach(N=>{w.append(N[0],N[1],N[2])}),w});function et(e){const i=e??{};return Object.keys(i).every(s=>s.toLowerCase()!=="content-type")&&(i["content-type"]="application/json"),i}function ie({message:e,embeddedIFrameElement:i,embedUrl:s}){var a;(a=i?.contentWindow)===null||a===void 0||a.postMessage(e,s)}function tt({endpointUrl:e,handleRequest:i,headers:s,includeCookies:a,operationId:m,operation:S,operationName:v,variables:w,fileVariables:N,embeddedIFrameElement:C,embedUrl:_,isMultipartSubscription:D,multipartSubscriptionClient:x}){return ke(this,void 0,void 0,function*(){const R={query:S,variables:w,operationName:v};let Y;if(N&&N.length>0){const H=yield jt({fileVariables:N,requestBody:R});Y=i(e,Object.assign({method:"POST",headers:s??{},body:H},a?{credentials:"include"}:{}))}else Y=i(e,Object.assign({method:"POST",headers:et(s),body:JSON.stringify(R)},a?{credentials:"include"}:{credentials:"omit"}));Y.then(H=>ke(this,void 0,void 0,function*(){var ee;const re={};H.headers.forEach((Q,ge)=>{re[ge]=Q});const de=(ee=H.headers)===null||ee===void 0?void 0:ee.get("content-type"),ue=de&&new M(de);if(ue&&ue.type==="multipart"&&ue.subtype==="mixed"){x?.emit("connected");const{observable:Q,closeReadableStream:ge}=kt(H,ue);let ae=!0;const ye=Q.subscribe({next(V){"payload"in V.data?("shouldTerminate"in V&&V.shouldTerminate&&(ye.unsubscribe(),ge(),ie({message:{name:Ye,status:"disconnected"},embeddedIFrameElement:C,embedUrl:_})),ie({message:{name:_e,operationId:m,response:{data:V.data,status:H.status,headers:ae?[re,...Array.isArray(V.headers)?V.headers:V.headers?[V.headers]:[]]:V.headers,size:V.size}},embeddedIFrameElement:C,embedUrl:_})):ie({message:{name:Me,operationId:m,response:{incremental:V.data.incremental,data:V.data.data,errors:V.data.errors,extensions:V.data.extensions,path:V.data.path,status:H.status,headers:ae?[re,...Array.isArray(V.headers)?V.headers:V.headers?[V.headers]:[]]:V.headers,hasNext:!0,size:V.size}},embeddedIFrameElement:C,embedUrl:_}),ae=!1},error(V){const xe=V&&typeof V=="object"&&"message"in V&&typeof V.message=="string"?Object.assign({message:V.message},"stack"in V&&typeof V.stack=="string"?{stack:V.stack}:{}):void 0;ie({message:{name:D?_e:Me,operationId:m,response:Object.assign({data:null,error:xe},D?{}:{hasNext:!1})},embeddedIFrameElement:C,embedUrl:_})},complete(){ie({message:{name:D?_e:Me,operationId:m,response:Object.assign({data:null,status:H.status,headers:ae?re:void 0},D?{}:{hasNext:!1})},embeddedIFrameElement:C,embedUrl:_})}});x&&(x.stopListeningCallback=()=>{ge(),ye.unsubscribe()})}else{const Q=yield H.json();x?.emit("error"),x?.emit("disconnected"),ie({message:{name:D?_e:Me,operationId:m,response:Object.assign(Object.assign({},Q),{status:H.status,headers:re,hasNext:!1})},embeddedIFrameElement:C,embedUrl:_})}})).catch(H=>{x?.emit("error",H),x?.emit("disconnected");const ee=H&&typeof H=="object"&&"message"in H&&typeof H.message=="string"?Object.assign({message:H.message},"stack"in H&&typeof H.stack=="string"?{stack:H.stack}:{}):void 0;ie({message:{name:D?_e:Me,operationId:m,response:Object.assign({data:null,error:ee},D?{}:{hasNext:!1})},embeddedIFrameElement:C,embedUrl:_})})})}function Dt({endpointUrl:e,headers:i,includeCookies:s,introspectionRequestBody:a,embeddedIFrameElement:m,embedUrl:S,handleRequest:v,operationId:w}){return ke(this,void 0,void 0,function*(){const{query:N,operationName:C}=JSON.parse(a);return v(e,Object.assign({method:"POST",headers:et(i),body:JSON.stringify({query:N,operationName:C})},s?{credentials:"include"}:{credentials:"omit"})).then(_=>_.json()).then(_=>{_.errors&&_.errors.length&&ie({message:{name:Xe,errors:_.errors,operationId:w},embeddedIFrameElement:m,embedUrl:S}),ie({message:{name:vt,schema:_.data,operationId:w},embeddedIFrameElement:m,embedUrl:S})}).catch(_=>{ie({message:{name:Xe,error:_,operationId:w},embeddedIFrameElement:m,embedUrl:S})})})}const Ft=({event:e,embeddedIFrameElement:i,embedUrl:s})=>{const{data:a}=e;if(a.name===xt){const m=S=>{S.data.name===At&&(window.removeEventListener("message",m),ie({message:{name:Ct,queryParams:S.data.queryParams},embeddedIFrameElement:i,embedUrl:s}))};window.addEventListener("message",m),window.open(a.oauthUrl,void 0,"_blank")}if(a.name===Ot){const m=window.localStorage.getItem("apolloStudioEmbeddedExplorerEncodedApiKey"),S=m?JSON.parse(m):{};S[a.localStorageKey]=a.partialToken,window.localStorage.setItem("apolloStudioEmbeddedExplorerEncodedApiKey",JSON.stringify(S))}if(a.name===It){const m=window.localStorage.getItem("apolloStudioEmbeddedExplorerEncodedApiKey"),S=m?JSON.parse(m):{};delete S[a.localStorageKey],window.localStorage.setItem("apolloStudioEmbeddedExplorerEncodedApiKey",JSON.stringify(S)),ie({message:{name:Rt},embeddedIFrameElement:i,embedUrl:s})}if(a.name===_t&&a.localStorageKey){const m=window.localStorage.getItem("apolloStudioEmbeddedExplorerEncodedApiKey"),S=m?JSON.parse(m):{};S&&S[a.localStorageKey]&&ie({message:{name:Nt,partialToken:S[a.localStorageKey]},embeddedIFrameElement:i,embedUrl:s})}};function Ne(e){throw new Error(`Didn't expect to get here ${e}`)}class Ut{constructor(i,s,a){this.unsubscribeFunctions=[],this.protocol=a,this.url=i,this.headers=s}get graphWsClient(){var i,s;const a=(i=this._graphWsClient)!==null&&i!==void 0?i:pt({url:this.url,lazy:!0,connectionParams:(s=this.headers)!==null&&s!==void 0?s:{},keepAlive:1e4});return this._graphWsClient=a,a}get transportSubscriptionClient(){var i,s;const a=(i=this._transportSubscriptionClient)!==null&&i!==void 0?i:new yt.SubscriptionClient(this.url,{reconnect:!0,lazy:!0,connectionParams:(s=this.headers)!==null&&s!==void 0?s:{}});return this._transportSubscriptionClient=a,a}get multipartClient(){var i;const s=(i=this._multipartClient)!==null&&i!==void 0?i:Object.assign(new ct,{stopListeningCallback:void 0});return this._multipartClient=s,s}onConnected(i){if(this.protocol==="http-multipart")return this.multipartClient.on("connected",i),()=>this.multipartClient.off("connected",i);if(this.protocol==="graphql-ws")return this.graphWsClient.on("connected",i);if(this.protocol==="subscriptions-transport-ws")return this.transportSubscriptionClient.onConnected(i);Ne(this.protocol)}onConnecting(i){if(this.protocol!=="http-multipart"){if(this.protocol==="graphql-ws")return this.graphWsClient.on("connecting",i);if(this.protocol==="subscriptions-transport-ws")return this.transportSubscriptionClient.onConnecting(i);Ne(this.protocol)}}onError(i){if(this.protocol==="http-multipart")return this.multipartClient.on("error",i),()=>this.multipartClient.off("error",i);if(this.protocol==="graphql-ws")return this.graphWsClient.on("error",s=>i(s));if(this.protocol==="subscriptions-transport-ws")return this.transportSubscriptionClient.onError(s=>i(s));Ne(this.protocol)}onReconnecting(i){if(this.protocol!=="http-multipart"&&this.protocol!=="graphql-ws"){if(this.protocol==="subscriptions-transport-ws")return this.transportSubscriptionClient.onReconnecting(i);Ne(this.protocol)}}onReconnected(i){if(this.protocol!=="http-multipart"&&this.protocol!=="graphql-ws"){if(this.protocol==="subscriptions-transport-ws")return this.transportSubscriptionClient.onReconnected(i);Ne(this.protocol)}}onDisconnected(i){if(this.protocol==="http-multipart")return this.multipartClient.on("disconnected",i),()=>this.multipartClient.off("disconnected",i);if(this.protocol==="graphql-ws")return this.graphWsClient.on("closed",i);if(this.protocol==="subscriptions-transport-ws")return this.transportSubscriptionClient.onDisconnected(i);Ne(this.protocol)}dispose(){var i,s;if(this.protocol==="http-multipart"){(s=(i=this.multipartClient).stopListeningCallback)===null||s===void 0||s.call(i);return}if(this.protocol==="graphql-ws")return this.graphWsClient.dispose();if(this.protocol==="subscriptions-transport-ws")return this.transportSubscriptionClient.close();Ne(this.protocol)}request(i){return{subscribe:s=>ke(this,void 0,void 0,function*(){var a,m,S,v;if(this.protocol==="http-multipart"&&i.httpMultipartParams&&(yield tt({operation:i.query,operationName:i.operationName,variables:i.variables,headers:(a=this.headers)!==null&&a!==void 0?a:{},includeCookies:(S=(m=i.httpMultipartParams)===null||m===void 0?void 0:m.includeCookies)!==null&&S!==void 0?S:!1,endpointUrl:this.url,embeddedIFrameElement:i.embeddedIFrameElement,embedUrl:i.embedUrl,operationId:i.operationId,handleRequest:(v=i.httpMultipartParams)===null||v===void 0?void 0:v.handleRequest,isMultipartSubscription:!0,multipartSubscriptionClient:this.multipartClient})),this.protocol==="graphql-ws"&&this.unsubscribeFunctions.push(this.graphWsClient.subscribe(i,Object.assign(Object.assign({},s),{next:w=>{var N;return(N=s.next)===null||N===void 0?void 0:N.call(s,w)},error:w=>{var N;return(N=s.error)===null||N===void 0?void 0:N.call(s,w)},complete:()=>{}}))),this.protocol==="subscriptions-transport-ws")return this.transportSubscriptionClient.request(i).subscribe(s)})}}unsubscribeAll(){var i,s;if(this.protocol==="http-multipart"&&((s=(i=this.multipartClient).stopListeningCallback)===null||s===void 0||s.call(i)),this.protocol==="graphql-ws"&&(this.unsubscribeFunctions.forEach(a=>{a()}),this.unsubscribeFunctions=[]),this.protocol==="subscriptions-transport-ws")return this.transportSubscriptionClient.unsubscribeAll()}}function $e({error:e,embeddedIFrameElement:i,embedUrl:s}){ie({message:{name:Tt,error:e},embeddedIFrameElement:i,embedUrl:s})}function Le({status:e,embeddedIFrameElement:i,embedUrl:s}){ie({message:{name:Ye,status:e},embeddedIFrameElement:i,embedUrl:s})}function Ht({operation:e,operationName:i,variables:s,headers:a,embeddedIFrameElement:m,operationId:S,embedUrl:v,subscriptionUrl:w,protocol:N,httpMultipartParams:C}){const _=new Ut(w,a??{},N),D=x=>{x.data.name===Et&&(_.unsubscribeAll(),window.removeEventListener("message",D))};return window.addEventListener("message",D),_.onError(x=>$e({error:JSON.parse(JSON.stringify(x)),embeddedIFrameElement:m,embedUrl:v})),_.onConnected(()=>{$e({error:void 0,embeddedIFrameElement:m,embedUrl:v}),Le({status:"connected",embeddedIFrameElement:m,embedUrl:v})}),_.onReconnected(()=>{$e({error:void 0,embeddedIFrameElement:m,embedUrl:v}),Le({status:"connected",embeddedIFrameElement:m,embedUrl:v})}),_.onConnecting(()=>Le({status:"connecting",embeddedIFrameElement:m,embedUrl:v})),_.onReconnecting(()=>Le({status:"connecting",embeddedIFrameElement:m,embedUrl:v})),_.onDisconnected(()=>Le({status:"disconnected",embeddedIFrameElement:m,embedUrl:v})),_.request({query:e,variables:s??{},operationName:i,embeddedIFrameElement:m,embedUrl:v,httpMultipartParams:C,operationId:S}).subscribe({next(x){ie({message:{name:_e,operationId:S,response:{data:x}},embeddedIFrameElement:m,embedUrl:v})},error:x=>{ie({message:{name:_e,operationId:S,response:{error:JSON.parse(JSON.stringify(x))}},embeddedIFrameElement:m,embedUrl:v})}}),{dispose:()=>window.removeEventListener("message",D)}}function Gt({handleRequest:e,embeddedSandboxIFrameElement:i,__testLocal__:s}){const a=Ke(s),m=S=>{Ft({event:S,embedUrl:a,embeddedIFrameElement:i});const v=typeof S.data=="object"?S.data:void 0;if(v&&"name"in v){if(v.name===St&&ie({message:{name:wt,parentHref:window.location.href},embeddedIFrameElement:i,embedUrl:a}),v.name===Pt){const{introspectionRequestBody:C,introspectionRequestHeaders:_,includeCookies:D,sandboxEndpointUrl:x,operationId:R}=v;x&&Dt({endpointUrl:x,introspectionRequestBody:C,headers:_,includeCookies:D,embeddedIFrameElement:i,embedUrl:a,handleRequest:e,operationId:R})}const w=v.name===gt,N=v.name===bt;if((w||N)&&v.operation&&v.operationId){const{operation:C,variables:_,operationName:D,operationId:x,headers:R}=v;if(w){const{endpointUrl:Y,includeCookies:H}=v;if(!Y)throw new Error("Something went wrong, we should not have gotten here. The sandbox endpoint url was not sent.");tt({endpointUrl:Y,handleRequest:e,headers:R,includeCookies:H,embeddedIFrameElement:i,operationId:x,operation:C,variables:_,fileVariables:"fileVariables"in v?v.fileVariables:void 0,operationName:D,embedUrl:a,isMultipartSubscription:!1})}else if(N){const{httpMultipartParams:Y}=v;Ht({operation:C,operationName:D,variables:_,headers:R,embeddedIFrameElement:i,operationId:x,embedUrl:a,subscriptionUrl:v.subscriptionUrl,protocol:v.protocol,httpMultipartParams:Object.assign(Object.assign({},Y),{handleRequest:e})})}}}};return window.addEventListener("message",m),{dispose:()=>window.removeEventListener("message",m)}}var Qt="@apollo/sandbox",Bt="2.7.0",Wt="packages@apollographql.com",Vt="MIT",$t={type:"git",url:"https://github.com/apollographql/embeddable-explorer/sandbox"},qt="https://github.com/apollographql/embeddable-explorer/sandbox#readme",zt="dist/index.cjs",Jt="dist/index.mjs",Kt="dist/src/index.d.ts",Xt={node:">=12.0",npm:">=7.0"},Yt={node:"16.13.0",npm:"8.3.1"},Zt={build:"npm run build:cjs-esm","build:cjs-esm":"rm -rf dist && rollup -c buildHelpers/rollup.cjs-esm.config.js && cp src/index.cjs dist/index.cjs && cp src/react/index.cjs dist/react/index.cjs && node ./buildHelpers/prepareDist.js sandbox","build:umd":"rm -rf dist && rollup -c buildHelpers/rollup.umd.config.js",lint:"eslint --ext .js,.jsx,.ts,.tsx .",size:"size-limit",analyze:"size-limit --why","typescript:check":"tsc --noEmit","prettier:check":"prettier --check .","prettier:fix":"prettier --write ."},en={hooks:{"pre-commit":"npm run lint"}},tn={printWidth:80,semi:!0,singleQuote:!0,trailingComma:"es5",endOfLine:"auto"},nn={react:"^16.8.0 || ^17.0.0 || ^18.0.0","react-dom":"^16.8.0 || ^17.0.0 || ^18.0.0"},rn={react:{optional:!0},"react-dom":{optional:!0}},on={"@types/whatwg-mimetype":"^3.0.0",eventemitter3:"3.1.0","graphql-ws":"^5.9.0","subscriptions-transport-ws":"^0.11.0","whatwg-mimetype":"^3.0.0","zen-observable-ts":"^1.1.0"},sn={name:Qt,version:Bt,author:Wt,license:Vt,repository:$t,homepage:qt,main:zt,module:Jt,typings:Kt,engines:Xt,volta:Yt,scripts:Zt,husky:en,prettier:tn,"size-limit":[{path:"dist/index.production.min.js",limit:"10 KB"},{path:"dist/index.mjs",limit:"10 KB"}],peerDependencies:nn,peerDependenciesMeta:rn,dependencies:on};let an=0;class cn{constructor(i){var s;this.options=i,this.__testLocal__=!!this.options.__testLocal__,this.validateOptions(),this.handleRequest=(s=this.options.handleRequest)!==null&&s!==void 0?s:Mt({legacyIncludeCookies:this.options.includeCookies}),this.uniqueEmbedInstanceId=an++,this.embeddedSandboxIFrameElement=this.injectEmbed(),this.disposable=Gt({embeddedSandboxIFrameElement:this.embeddedSandboxIFrameElement,handleRequest:this.handleRequest,__testLocal__:!!this.__testLocal__})}dispose(){var i;(i=document.getElementById(Ze(this.uniqueEmbedInstanceId)))===null||i===void 0||i.remove(),this.disposable.dispose()}injectEmbed(){var i,s,a,m,S,v,w;let N;const{target:C,runTelemetry:_}=this.options,{includeCookies:D,sharedHeaders:x}=this.options.initialState||{},R=Object.assign(Object.assign(Object.assign({runtime:this.options.runtime,endpoint:this.options.initialEndpoint,subscriptionEndpoint:this.options.initialSubscriptionEndpoint,sendOperationHeadersInIntrospection:(i=this.options.sendOperationHeadersInIntrospection)!==null&&i!==void 0?i:!0},this.options.initialState&&"collectionId"in this.options.initialState?{defaultCollectionEntryId:this.options.initialState.operationId,defaultCollectionId:this.options.initialState.collectionId}:{}),this.options.initialState&&"document"in this.options.initialState?{defaultDocument:this.options.initialState.document?encodeURIComponent(this.options.initialState.document):void 0,defaultVariables:this.options.initialState.variables?encodeURIComponent(JSON.stringify(this.options.initialState.variables,null,2)):void 0,defaultHeaders:this.options.initialState.headers?encodeURIComponent(JSON.stringify(this.options.initialState.headers)):void 0}:{}),{sharedHeaders:x?encodeURIComponent(JSON.stringify(x)):void 0,defaultIncludeCookies:D,hideCookieToggle:(s=this.options.hideCookieToggle)!==null&&s!==void 0?s:!0,parentSupportsSubscriptions:!0,version:sn.version,runTelemetry:_===void 0?!0:_,initialRequestQueryPlan:(a=this.options.initialRequestQueryPlan)!==null&&a!==void 0?a:!1,initialRequestConnectorsDebugging:(m=this.options.initialRequestConnectorsDebugging)!==null&&m!==void 0?m:!1,shouldDefaultAutoupdateSchema:(v=(S=this.options.initialState)===null||S===void 0?void 0:S.pollForSchemaUpdates)!==null&&v!==void 0?v:!0,endpointIsEditable:this.options.endpointIsEditable}),Y=Object.entries(R).filter(([ee,re])=>re!==void 0).map(([ee,re])=>`${ee}=${re}`).join("&");typeof C=="string"?N=(w=document?.querySelector)===null||w===void 0?void 0:w.call(document,C):N=C;const H=document.createElement("iframe");return H.src=`${Ke(this.__testLocal__)}?${Y}`,H.id=Ze(this.uniqueEmbedInstanceId),this.options.allowDynamicStyles!==!1&&H.setAttribute("style","height: 100%; width: 100%; border: none;"),N?.appendChild(H),fetch(`${window.location.origin}/favicon.ico`).then(ee=>{if(ee.status===404){var re=document.querySelector('link[rel*="icon"]');if(!re){var de=window.matchMedia("(prefers-color-scheme: dark)").matches;["icon","apple-touch-icon"].forEach(ue=>{var Q=document.createElement("link");Q.rel=ue,Q.href=`https://embeddable-explorer.cdn.apollographql.com/_latest/public/assets/favicon${de?"-dark":""}.png`,document.head.appendChild(Q)})}}}).catch(()=>{}),H}validateOptions(){var i;if(!this.options.target)throw new Error('"target" is required');if(this.options.includeCookies!==void 0&&console.warn("Passing `includeCookies` is deprecated. If you would like to set a default includeCookies value, please use `initialState.includeCookies` instead."),this.options.includeCookies!==void 0&&(this.options.hideCookieToggle!==void 0||((i=this.options.initialState)===null||i===void 0?void 0:i.includeCookies)!==void 0))throw new Error("Passing `includeCookies` is deprecated and will override your sandbox connection settings configuration.")}}function un(e){const[i,s]=(0,T.useState)(),a=(0,T.useRef)(),{handleRequest:m,includeCookies:S,className:v}=e;return(0,T.useEffect)(()=>{var w;if(i)return(w=a.current)===null||w===void 0||w.dispose(),a.current=new cn(Object.assign(Object.assign({},e),{target:i})),()=>{var N;return(N=a.current)===null||N===void 0?void 0:N.dispose()}},[m,S,v,i]),T.createElement("div",{className:v,ref:w=>{s(w)}})}var ln=r(42455),fn=r(38413),dn=r(55356),pn=r(4198),hn=r(94061),mn=r(30893),yn=r(18629),vn=r(58805),gn=r(46270);const bn=`
query ExampleQuery {
  me {
    id
  }
}

// Remember to submit an Authorization header
// with a valid JWT token or API Token. (API Tokens can't access "me")
`;function En(){const[e,i]=(0,T.useState)(null),[s,a]=(0,T.useState)(null);return(0,T.useEffect)(()=>((0,j.l1)("/apollo-sandbox/create-tunnel",{method:"GET"}).then(m=>{console.log(`GraphQL Tunnel created on: ${m.url}`),a(m.url)}).catch(m=>{console.log(m),i("There was an error creating or reading the Tunnel. Please try again and make sure your plugin configuration is correct.")}),()=>{(0,j.l1)("/apollo-sandbox/close-tunnel",{method:"GET"}).then(m=>{console.log("GraphQL Tunnel closed"),console.log(m)})}),[]),(0,d.jsx)(d.Fragment,{children:(0,d.jsx)("div",{className:"apollo-sandbox-wrapper",children:s?(0,d.jsx)(un,{initialState:{document:bn},endpointIsEditable:!1,className:"apollo-sandbox",initialEndpoint:s}):(0,d.jsx)(ln.P,{children:(0,d.jsxs)(fn.g,{children:[(0,d.jsx)(dn.Q,{title:"Apollo Sandbox",subtitle:"A Powerful Plugin for Apollo GraphQL Development"}),(0,d.jsx)(pn.s,{children:(0,d.jsx)(hn.a,{padding:4,hasRadius:!0,background:"neutral0",shadow:"tableShadow",children:e?(0,d.jsx)(mn.o,{textColor:"danger500",children:e}):(0,d.jsx)(yn.Q,{loading:!0,startIcon:(0,d.jsx)(vn.I,{as:gn.A}),children:"Loading Tunnel..."})})})]})})})})}const Tn=En;function Sn(){return(0,d.jsx)("div",{children:(0,d.jsxs)(L.dO,{children:[(0,d.jsx)(L.qh,{path:`/plugins/${P.A}`,component:Tn,exact:!0}),(0,d.jsx)(L.qh,{component:j.hH})]})})}const wn=Sn},92975:W=>{W.exports=b;function b(r){r=r||{},this.ms=r.min||100,this.max=r.max||1e4,this.factor=r.factor||2,this.jitter=r.jitter>0&&r.jitter<=1?r.jitter:0,this.attempts=0}b.prototype.duration=function(){var r=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var d=Math.random(),L=Math.floor(d*this.jitter*r);r=Math.floor(d*10)&1?r+L:r-L}return Math.min(r,this.max)|0},b.prototype.reset=function(){this.attempts=0},b.prototype.setMin=function(r){this.ms=r},b.prototype.setMax=function(r){this.max=r},b.prototype.setJitter=function(r){this.jitter=r}},22912:W=>{"use strict";var b=Object.prototype.hasOwnProperty,r="~";function d(){}Object.create&&(d.prototype=Object.create(null),new d().__proto__||(r=!1));function L(E,o,p){this.fn=E,this.context=o,this.once=p||!1}function j(E,o,p,u,k){if(typeof p!="function")throw new TypeError("The listener must be a function");var U=new L(p,u||E,k),A=r?r+o:o;return E._events[A]?E._events[A].fn?E._events[A]=[E._events[A],U]:E._events[A].push(U):(E._events[A]=U,E._eventsCount++),E}function P(E,o){--E._eventsCount===0?E._events=new d:delete E._events[o]}function h(){this._events=new d,this._eventsCount=0}h.prototype.eventNames=function(){var o=[],p,u;if(this._eventsCount===0)return o;for(u in p=this._events)b.call(p,u)&&o.push(r?u.slice(1):u);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(p)):o},h.prototype.listeners=function(o){var p=r?r+o:o,u=this._events[p];if(!u)return[];if(u.fn)return[u.fn];for(var k=0,U=u.length,A=new Array(U);k<U;k++)A[k]=u[k].fn;return A},h.prototype.listenerCount=function(o){var p=r?r+o:o,u=this._events[p];return u?u.fn?1:u.length:0},h.prototype.emit=function(o,p,u,k,U,A){var n=r?r+o:o;if(!this._events[n])return!1;var t=this._events[n],c=arguments.length,y,g;if(t.fn){switch(t.once&&this.removeListener(o,t.fn,void 0,!0),c){case 1:return t.fn.call(t.context),!0;case 2:return t.fn.call(t.context,p),!0;case 3:return t.fn.call(t.context,p,u),!0;case 4:return t.fn.call(t.context,p,u,k),!0;case 5:return t.fn.call(t.context,p,u,k,U),!0;case 6:return t.fn.call(t.context,p,u,k,U,A),!0}for(g=1,y=new Array(c-1);g<c;g++)y[g-1]=arguments[g];t.fn.apply(t.context,y)}else{var O=t.length,l;for(g=0;g<O;g++)switch(t[g].once&&this.removeListener(o,t[g].fn,void 0,!0),c){case 1:t[g].fn.call(t[g].context);break;case 2:t[g].fn.call(t[g].context,p);break;case 3:t[g].fn.call(t[g].context,p,u);break;case 4:t[g].fn.call(t[g].context,p,u,k);break;default:if(!y)for(l=1,y=new Array(c-1);l<c;l++)y[l-1]=arguments[l];t[g].fn.apply(t[g].context,y)}}return!0},h.prototype.on=function(o,p,u){return j(this,o,p,u,!1)},h.prototype.once=function(o,p,u){return j(this,o,p,u,!0)},h.prototype.removeListener=function(o,p,u,k){var U=r?r+o:o;if(!this._events[U])return this;if(!p)return P(this,U),this;var A=this._events[U];if(A.fn)A.fn===p&&(!k||A.once)&&(!u||A.context===u)&&P(this,U);else{for(var n=0,t=[],c=A.length;n<c;n++)(A[n].fn!==p||k&&!A[n].once||u&&A[n].context!==u)&&t.push(A[n]);t.length?this._events[U]=t.length===1?t[0]:t:P(this,U)}return this},h.prototype.removeAllListeners=function(o){var p;return o?(p=r?r+o:o,this._events[p]&&P(this,p)):(this._events=new d,this._eventsCount=0),this},h.prototype.off=h.prototype.removeListener,h.prototype.addListener=h.prototype.on,h.prefixed=r,h.EventEmitter=h,W.exports=h},98976:(W,b,r)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=P;var d=j(r(90733)),L=j(r(40353));function j(h){return h&&h.__esModule?h:{default:h}}function P(h){var E=h.prototype.toJSON;typeof E=="function"||(0,d.default)(0),h.prototype.inspect=E,L.default&&(h.prototype[L.default]=E)}},40773:(W,b,r)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=E;var d=L(r(40353));function L(n){return n&&n.__esModule?n:{default:n}}function j(n){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?j=function(c){return typeof c}:j=function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},j(n)}var P=10,h=2;function E(n){return o(n,[])}function o(n,t){switch(j(n)){case"string":return JSON.stringify(n);case"function":return n.name?"[function ".concat(n.name,"]"):"[function]";case"object":return n===null?"null":p(n,t);default:return String(n)}}function p(n,t){if(t.indexOf(n)!==-1)return"[Circular]";var c=[].concat(t,[n]),y=U(n);if(y!==void 0){var g=y.call(n);if(g!==n)return typeof g=="string"?g:o(g,c)}else if(Array.isArray(n))return k(n,c);return u(n,c)}function u(n,t){var c=Object.keys(n);if(c.length===0)return"{}";if(t.length>h)return"["+A(n)+"]";var y=c.map(function(g){var O=o(n[g],t);return g+": "+O});return"{ "+y.join(", ")+" }"}function k(n,t){if(n.length===0)return"[]";if(t.length>h)return"[Array]";for(var c=Math.min(P,n.length),y=n.length-c,g=[],O=0;O<c;++O)g.push(o(n[O],t));return y===1?g.push("... 1 more item"):y>1&&g.push("... ".concat(y," more items")),"["+g.join(", ")+"]"}function U(n){var t=n[String(d.default)];if(typeof t=="function")return t;if(typeof n.inspect=="function")return n.inspect}function A(n){var t=Object.prototype.toString.call(n).replace(/^\[object /,"").replace(/]$/,"");if(t==="Object"&&typeof n.constructor=="function"){var c=n.constructor.name;if(typeof c=="string"&&c!=="")return c}return t}},90733:(W,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=r;function r(d,L){var j=Boolean(d);if(!j)throw new Error(L??"Unexpected invariant triggered.")}},40353:(W,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):void 0,d=r;b.default=d},75997:(W,b,r)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.isNode=h,b.Token=b.Location=void 0;var d=L(r(98976));function L(E){return E&&E.__esModule?E:{default:E}}var j=function(){function E(p,u,k){this.start=p.start,this.end=u.end,this.startToken=p,this.endToken=u,this.source=k}var o=E.prototype;return o.toJSON=function(){return{start:this.start,end:this.end}},E}();b.Location=j,(0,d.default)(j);var P=function(){function E(p,u,k,U,A,n,t){this.kind=p,this.start=u,this.end=k,this.line=U,this.column=A,this.value=t,this.prev=n,this.next=null}var o=E.prototype;return o.toJSON=function(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}},E}();b.Token=P,(0,d.default)(P);function h(E){return E!=null&&typeof E.kind=="string"}},25:(W,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.dedentBlockStringValue=r,b.getBlockStringIndentation=L,b.printBlockString=j;function r(P){var h=P.split(/\r\n|[\n\r]/g),E=L(P);if(E!==0)for(var o=1;o<h.length;o++)h[o]=h[o].slice(E);for(var p=0;p<h.length&&d(h[p]);)++p;for(var u=h.length;u>p&&d(h[u-1]);)--u;return h.slice(p,u).join(`
`)}function d(P){for(var h=0;h<P.length;++h)if(P[h]!==" "&&P[h]!=="	")return!1;return!0}function L(P){for(var h,E=!0,o=!0,p=0,u=null,k=0;k<P.length;++k)switch(P.charCodeAt(k)){case 13:P.charCodeAt(k+1)===10&&++k;case 10:E=!1,o=!0,p=0;break;case 9:case 32:++p;break;default:o&&!E&&(u===null||p<u)&&(u=p),o=!1}return(h=u)!==null&&h!==void 0?h:0}function j(P){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,o=P.indexOf(`
`)===-1,p=P[0]===" "||P[0]==="	",u=P[P.length-1]==='"',k=P[P.length-1]==="\\",U=!o||u||k||E,A="";return U&&!(o&&p)&&(A+=`
`+h),A+=h?P.replace(/\n/g,`
`+h):P,U&&(A+=`
`),'"""'+A.replace(/"""/g,'\\"""')+'"""'}},64170:(W,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.Kind=void 0;var r=Object.freeze({NAME:"Name",DOCUMENT:"Document",OPERATION_DEFINITION:"OperationDefinition",VARIABLE_DEFINITION:"VariableDefinition",SELECTION_SET:"SelectionSet",FIELD:"Field",ARGUMENT:"Argument",FRAGMENT_SPREAD:"FragmentSpread",INLINE_FRAGMENT:"InlineFragment",FRAGMENT_DEFINITION:"FragmentDefinition",VARIABLE:"Variable",INT:"IntValue",FLOAT:"FloatValue",STRING:"StringValue",BOOLEAN:"BooleanValue",NULL:"NullValue",ENUM:"EnumValue",LIST:"ListValue",OBJECT:"ObjectValue",OBJECT_FIELD:"ObjectField",DIRECTIVE:"Directive",NAMED_TYPE:"NamedType",LIST_TYPE:"ListType",NON_NULL_TYPE:"NonNullType",SCHEMA_DEFINITION:"SchemaDefinition",OPERATION_TYPE_DEFINITION:"OperationTypeDefinition",SCALAR_TYPE_DEFINITION:"ScalarTypeDefinition",OBJECT_TYPE_DEFINITION:"ObjectTypeDefinition",FIELD_DEFINITION:"FieldDefinition",INPUT_VALUE_DEFINITION:"InputValueDefinition",INTERFACE_TYPE_DEFINITION:"InterfaceTypeDefinition",UNION_TYPE_DEFINITION:"UnionTypeDefinition",ENUM_TYPE_DEFINITION:"EnumTypeDefinition",ENUM_VALUE_DEFINITION:"EnumValueDefinition",INPUT_OBJECT_TYPE_DEFINITION:"InputObjectTypeDefinition",DIRECTIVE_DEFINITION:"DirectiveDefinition",SCHEMA_EXTENSION:"SchemaExtension",SCALAR_TYPE_EXTENSION:"ScalarTypeExtension",OBJECT_TYPE_EXTENSION:"ObjectTypeExtension",INTERFACE_TYPE_EXTENSION:"InterfaceTypeExtension",UNION_TYPE_EXTENSION:"UnionTypeExtension",ENUM_TYPE_EXTENSION:"EnumTypeExtension",INPUT_OBJECT_TYPE_EXTENSION:"InputObjectTypeExtension"});b.Kind=r},12485:(W,b,r)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.print=j;var d=r(54419),L=r(25);function j(n){return(0,d.visit)(n,{leave:h})}var P=80,h={Name:function(t){return t.value},Variable:function(t){return"$"+t.name},Document:function(t){return o(t.definitions,`

`)+`
`},OperationDefinition:function(t){var c=t.operation,y=t.name,g=u("(",o(t.variableDefinitions,", "),")"),O=o(t.directives," "),l=t.selectionSet;return!y&&!O&&!g&&c==="query"?l:o([c,o([y,g]),O,l]," ")},VariableDefinition:function(t){var c=t.variable,y=t.type,g=t.defaultValue,O=t.directives;return c+": "+y+u(" = ",g)+u(" ",o(O," "))},SelectionSet:function(t){var c=t.selections;return p(c)},Field:function(t){var c=t.alias,y=t.name,g=t.arguments,O=t.directives,l=t.selectionSet,f=u("",c,": ")+y,T=f+u("(",o(g,", "),")");return T.length>P&&(T=f+u(`(
`,k(o(g,`
`)),`
)`)),o([T,o(O," "),l]," ")},Argument:function(t){var c=t.name,y=t.value;return c+": "+y},FragmentSpread:function(t){var c=t.name,y=t.directives;return"..."+c+u(" ",o(y," "))},InlineFragment:function(t){var c=t.typeCondition,y=t.directives,g=t.selectionSet;return o(["...",u("on ",c),o(y," "),g]," ")},FragmentDefinition:function(t){var c=t.name,y=t.typeCondition,g=t.variableDefinitions,O=t.directives,l=t.selectionSet;return"fragment ".concat(c).concat(u("(",o(g,", "),")")," ")+"on ".concat(y," ").concat(u("",o(O," ")," "))+l},IntValue:function(t){var c=t.value;return c},FloatValue:function(t){var c=t.value;return c},StringValue:function(t,c){var y=t.value,g=t.block;return g?(0,L.printBlockString)(y,c==="description"?"":"  "):JSON.stringify(y)},BooleanValue:function(t){var c=t.value;return c?"true":"false"},NullValue:function(){return"null"},EnumValue:function(t){var c=t.value;return c},ListValue:function(t){var c=t.values;return"["+o(c,", ")+"]"},ObjectValue:function(t){var c=t.fields;return"{"+o(c,", ")+"}"},ObjectField:function(t){var c=t.name,y=t.value;return c+": "+y},Directive:function(t){var c=t.name,y=t.arguments;return"@"+c+u("(",o(y,", "),")")},NamedType:function(t){var c=t.name;return c},ListType:function(t){var c=t.type;return"["+c+"]"},NonNullType:function(t){var c=t.type;return c+"!"},SchemaDefinition:E(function(n){var t=n.directives,c=n.operationTypes;return o(["schema",o(t," "),p(c)]," ")}),OperationTypeDefinition:function(t){var c=t.operation,y=t.type;return c+": "+y},ScalarTypeDefinition:E(function(n){var t=n.name,c=n.directives;return o(["scalar",t,o(c," ")]," ")}),ObjectTypeDefinition:E(function(n){var t=n.name,c=n.interfaces,y=n.directives,g=n.fields;return o(["type",t,u("implements ",o(c," & ")),o(y," "),p(g)]," ")}),FieldDefinition:E(function(n){var t=n.name,c=n.arguments,y=n.type,g=n.directives;return t+(A(c)?u(`(
`,k(o(c,`
`)),`
)`):u("(",o(c,", "),")"))+": "+y+u(" ",o(g," "))}),InputValueDefinition:E(function(n){var t=n.name,c=n.type,y=n.defaultValue,g=n.directives;return o([t+": "+c,u("= ",y),o(g," ")]," ")}),InterfaceTypeDefinition:E(function(n){var t=n.name,c=n.interfaces,y=n.directives,g=n.fields;return o(["interface",t,u("implements ",o(c," & ")),o(y," "),p(g)]," ")}),UnionTypeDefinition:E(function(n){var t=n.name,c=n.directives,y=n.types;return o(["union",t,o(c," "),y&&y.length!==0?"= "+o(y," | "):""]," ")}),EnumTypeDefinition:E(function(n){var t=n.name,c=n.directives,y=n.values;return o(["enum",t,o(c," "),p(y)]," ")}),EnumValueDefinition:E(function(n){var t=n.name,c=n.directives;return o([t,o(c," ")]," ")}),InputObjectTypeDefinition:E(function(n){var t=n.name,c=n.directives,y=n.fields;return o(["input",t,o(c," "),p(y)]," ")}),DirectiveDefinition:E(function(n){var t=n.name,c=n.arguments,y=n.repeatable,g=n.locations;return"directive @"+t+(A(c)?u(`(
`,k(o(c,`
`)),`
)`):u("(",o(c,", "),")"))+(y?" repeatable":"")+" on "+o(g," | ")}),SchemaExtension:function(t){var c=t.directives,y=t.operationTypes;return o(["extend schema",o(c," "),p(y)]," ")},ScalarTypeExtension:function(t){var c=t.name,y=t.directives;return o(["extend scalar",c,o(y," ")]," ")},ObjectTypeExtension:function(t){var c=t.name,y=t.interfaces,g=t.directives,O=t.fields;return o(["extend type",c,u("implements ",o(y," & ")),o(g," "),p(O)]," ")},InterfaceTypeExtension:function(t){var c=t.name,y=t.interfaces,g=t.directives,O=t.fields;return o(["extend interface",c,u("implements ",o(y," & ")),o(g," "),p(O)]," ")},UnionTypeExtension:function(t){var c=t.name,y=t.directives,g=t.types;return o(["extend union",c,o(y," "),g&&g.length!==0?"= "+o(g," | "):""]," ")},EnumTypeExtension:function(t){var c=t.name,y=t.directives,g=t.values;return o(["extend enum",c,o(y," "),p(g)]," ")},InputObjectTypeExtension:function(t){var c=t.name,y=t.directives,g=t.fields;return o(["extend input",c,o(y," "),p(g)]," ")}};function E(n){return function(t){return o([t.description,n(t)],`
`)}}function o(n){var t,c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return(t=n?.filter(function(y){return y}).join(c))!==null&&t!==void 0?t:""}function p(n){return u(`{
`,k(o(n,`
`)),`
}`)}function u(n,t){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";return t!=null&&t!==""?n+t+c:""}function k(n){return u("  ",n.replace(/\n/g,`
  `))}function U(n){return n.indexOf(`
`)!==-1}function A(n){return n!=null&&n.some(U)}},54419:(W,b,r)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.visit=E,b.visitInParallel=o,b.getVisitFn=p,b.BREAK=b.QueryDocumentKeys=void 0;var d=j(r(40773)),L=r(75997);function j(u){return u&&u.__esModule?u:{default:u}}var P={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]};b.QueryDocumentKeys=P;var h=Object.freeze({});b.BREAK=h;function E(u,k){var U=arguments.length>2&&arguments[2]!==void 0?arguments[2]:P,A=void 0,n=Array.isArray(u),t=[u],c=-1,y=[],g=void 0,O=void 0,l=void 0,f=[],T=[],M=u;do{c++;var I=c===t.length,J=I&&y.length!==0;if(I){if(O=T.length===0?void 0:f[f.length-1],g=l,l=T.pop(),J){if(n)g=g.slice();else{for(var te={},ne=0,F=Object.keys(g);ne<F.length;ne++){var q=F[ne];te[q]=g[q]}g=te}for(var se=0,le=0;le<y.length;le++){var Oe=y[le][0],Ee=y[le][1];n&&(Oe-=se),n&&Ee===null?(g.splice(Oe,1),se++):g[Oe]=Ee}}c=A.index,t=A.keys,y=A.edits,n=A.inArray,A=A.prev}else{if(O=l?n?c:t[c]:void 0,g=l?l[O]:M,g==null)continue;l&&f.push(O)}var he=void 0;if(!Array.isArray(g)){if(!(0,L.isNode)(g))throw new Error("Invalid AST Node: ".concat((0,d.default)(g),"."));var be=p(k,g.kind,I);if(be){if(he=be.call(k,g,O,l,f,T),he===h)break;if(he===!1){if(!I){f.pop();continue}}else if(he!==void 0&&(y.push([O,he]),!I))if((0,L.isNode)(he))g=he;else{f.pop();continue}}}if(he===void 0&&J&&y.push([O,g]),I)f.pop();else{var ve;A={inArray:n,index:c,keys:t,edits:y,prev:A},n=Array.isArray(g),t=n?g:(ve=U[g.kind])!==null&&ve!==void 0?ve:[],c=-1,y=[],l&&T.push(l),l=g}}while(A!==void 0);return y.length!==0&&(M=y[y.length-1][1]),M}function o(u){var k=new Array(u.length);return{enter:function(A){for(var n=0;n<u.length;n++)if(k[n]==null){var t=p(u[n],A.kind,!1);if(t){var c=t.apply(u[n],arguments);if(c===!1)k[n]=A;else if(c===h)k[n]=h;else if(c!==void 0)return c}}},leave:function(A){for(var n=0;n<u.length;n++)if(k[n]==null){var t=p(u[n],A.kind,!0);if(t){var c=t.apply(u[n],arguments);if(c===h)k[n]=h;else if(c!==void 0&&c!==!1)return c}}else k[n]===A&&(k[n]=null)}}}function p(u,k,U){var A=u[k];if(A){if(!U&&typeof A=="function")return A;var n=U?A.leave:A.enter;if(typeof n=="function")return n}else{var t=U?u.leave:u.enter;if(t){if(typeof t=="function")return t;var c=t[k];if(typeof c=="function")return c}}}},87822:(W,b,r)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.getOperationAST=L;var d=r(64170);function L(j,P){for(var h=null,E=0,o=j.definitions;E<o.length;E++){var p=o[E];if(p.kind===d.Kind.OPERATION_DEFINITION){var u;if(P==null){if(h)return null;h=p}else if(((u=p.name)===null||u===void 0?void 0:u.value)===P)return p}}return h}},21680:function(W,b,r){"use strict";var d=this&&this.__assign||function(){return d=Object.assign||function(O){for(var l,f=1,T=arguments.length;f<T;f++){l=arguments[f];for(var M in l)Object.prototype.hasOwnProperty.call(l,M)&&(O[M]=l[M])}return O},d.apply(this,arguments)},L=this&&this.__awaiter||function(O,l,f,T){function M(I){return I instanceof f?I:new f(function(J){J(I)})}return new(f||(f=Promise))(function(I,J){function te(q){try{F(T.next(q))}catch(se){J(se)}}function ne(q){try{F(T.throw(q))}catch(se){J(se)}}function F(q){q.done?I(q.value):M(q.value).then(te,ne)}F((T=T.apply(O,l||[])).next())})},j=this&&this.__generator||function(O,l){var f={label:0,sent:function(){if(I[0]&1)throw I[1];return I[1]},trys:[],ops:[]},T,M,I,J;return J={next:te(0),throw:te(1),return:te(2)},typeof Symbol=="function"&&(J[Symbol.iterator]=function(){return this}),J;function te(F){return function(q){return ne([F,q])}}function ne(F){if(T)throw new TypeError("Generator is already executing.");for(;f;)try{if(T=1,M&&(I=F[0]&2?M.return:F[0]?M.throw||((I=M.return)&&I.call(M),0):M.next)&&!(I=I.call(M,F[1])).done)return I;switch(M=0,I&&(F=[F[0]&2,I.value]),F[0]){case 0:case 1:I=F;break;case 4:return f.label++,{value:F[1],done:!1};case 5:f.label++,M=F[1],F=[0];continue;case 7:F=f.ops.pop(),f.trys.pop();continue;default:if(I=f.trys,!(I=I.length>0&&I[I.length-1])&&(F[0]===6||F[0]===2)){f=0;continue}if(F[0]===3&&(!I||F[1]>I[0]&&F[1]<I[3])){f.label=F[1];break}if(F[0]===6&&f.label<I[1]){f.label=I[1],I=F;break}if(I&&f.label<I[2]){f.label=I[2],f.ops.push(F);break}I[2]&&f.ops.pop(),f.trys.pop();continue}F=l.call(O,f)}catch(q){F=[6,q],M=0}finally{T=I=0}if(F[0]&5)throw F[1];return{value:F[0]?F[1]:void 0,done:!0}}},P=this&&this.__spreadArray||function(O,l,f){if(f||arguments.length===2)for(var T=0,M=l.length,I;T<M;T++)(I||!(T in l))&&(I||(I=Array.prototype.slice.call(l,0,T)),I[T]=l[T]);return O.concat(I||Array.prototype.slice.call(l))};Object.defineProperty(b,"__esModule",{value:!0}),b.SubscriptionClient=void 0;var h=typeof r.g<"u"?r.g:typeof window<"u"?window:{},E=h.WebSocket||h.MozWebSocket,o=r(92975),p=r(22912),u=r(43211),k=r(52833),U=r(12485),A=r(87822),n=r(44085),t=r(42063),c=r(35345),y=r(16664),g=function(){function O(l,f,T,M){var I=f||{},J=I.connectionCallback,te=J===void 0?void 0:J,ne=I.connectionParams,F=ne===void 0?{}:ne,q=I.minTimeout,se=q===void 0?c.MIN_WS_TIMEOUT:q,le=I.timeout,Oe=le===void 0?c.WS_TIMEOUT:le,Ee=I.reconnect,he=Ee===void 0?!1:Ee,be=I.reconnectionAttempts,ve=be===void 0?1/0:be,De=I.lazy,Te=De===void 0?!1:De,Ie=I.inactivityTimeout,Fe=Ie===void 0?0:Ie,Ae=I.wsOptionArguments,Qe=Ae===void 0?[]:Ae;if(this.wsImpl=T||E,!this.wsImpl)throw new Error("Unable to find native implementation, or alternative implementation for WebSocket!");this.wsProtocols=M||t.GRAPHQL_WS,this.connectionCallback=te,this.url=l,this.operations={},this.nextOperationId=0,this.minWsTimeout=se,this.wsTimeout=Oe,this.unsentMessagesQueue=[],this.reconnect=he,this.reconnecting=!1,this.reconnectionAttempts=ve,this.lazy=!!Te,this.inactivityTimeout=Fe,this.closedByUser=!1,this.backoff=new o({jitter:.5}),this.eventEmitter=new p.EventEmitter,this.middlewares=[],this.client=null,this.maxConnectTimeGenerator=this.createMaxConnectTimeGenerator(),this.connectionParams=this.getConnectionParams(F),this.wsOptionArguments=Qe,this.lazy||this.connect()}return Object.defineProperty(O.prototype,"status",{get:function(){return this.client===null?this.wsImpl.CLOSED:this.client.readyState},enumerable:!1,configurable:!0}),O.prototype.close=function(l,f){l===void 0&&(l=!0),f===void 0&&(f=!0),this.clearInactivityTimeout(),this.client!==null&&(this.closedByUser=f,l&&(this.clearCheckConnectionInterval(),this.clearMaxConnectTimeout(),this.clearTryReconnectTimeout(),this.unsubscribeAll(),this.sendMessage(void 0,y.default.GQL_CONNECTION_TERMINATE,null)),this.client.close(),this.client.onopen=null,this.client.onclose=null,this.client.onerror=null,this.client.onmessage=null,this.client=null,this.eventEmitter.emit("disconnected"),l||this.tryReconnect())},O.prototype.request=function(l){var f,T=this.getObserver.bind(this),M=this.executeOperation.bind(this),I=this.unsubscribe.bind(this),J;return this.clearInactivityTimeout(),f={},f[n.default]=function(){return this},f.subscribe=function(te,ne,F){var q=T(te,ne,F);return J=M(l,function(se,le){se===null&&le===null?q.complete&&q.complete():se?q.error&&q.error(se[0]):q.next&&q.next(le)}),{unsubscribe:function(){J&&(I(J),J=null)}}},f},O.prototype.on=function(l,f,T){var M=this.eventEmitter.on(l,f,T);return function(){M.off(l,f,T)}},O.prototype.onConnected=function(l,f){return this.on("connected",l,f)},O.prototype.onConnecting=function(l,f){return this.on("connecting",l,f)},O.prototype.onDisconnected=function(l,f){return this.on("disconnected",l,f)},O.prototype.onReconnected=function(l,f){return this.on("reconnected",l,f)},O.prototype.onReconnecting=function(l,f){return this.on("reconnecting",l,f)},O.prototype.onError=function(l,f){return this.on("error",l,f)},O.prototype.unsubscribeAll=function(){var l=this;Object.keys(this.operations).forEach(function(f){l.unsubscribe(f)})},O.prototype.applyMiddlewares=function(l){var f=this;return new Promise(function(T,M){var I=function(J,te){var ne=function(F){if(F)M(F);else if(J.length>0){var q=J.shift();q&&q.applyMiddleware.apply(te,[l,ne])}else T(l)};ne()};I(P([],f.middlewares,!0),f)})},O.prototype.use=function(l){var f=this;return l.map(function(T){if(typeof T.applyMiddleware=="function")f.middlewares.push(T);else throw new Error("Middleware must implement the applyMiddleware function.")}),this},O.prototype.getConnectionParams=function(l){return function(){return new Promise(function(f,T){if(typeof l=="function")try{return f(l.call(null))}catch(M){return T(M)}f(l)})}},O.prototype.executeOperation=function(l,f){var T=this;this.client===null&&this.connect();var M=this.generateOperationId();return this.operations[M]={options:l,handler:f},this.applyMiddlewares(l).then(function(I){T.checkOperationOptions(I,f),T.operations[M]&&(T.operations[M]={options:I,handler:f},T.sendMessage(M,y.default.GQL_START,I))}).catch(function(I){T.unsubscribe(M),f(T.formatErrors(I))}),M},O.prototype.getObserver=function(l,f,T){return typeof l=="function"?{next:function(M){return l(M)},error:function(M){return f&&f(M)},complete:function(){return T&&T()}}:l},O.prototype.createMaxConnectTimeGenerator=function(){var l=this.minWsTimeout,f=this.wsTimeout;return new o({min:l,max:f,factor:1.2})},O.prototype.clearCheckConnectionInterval=function(){this.checkConnectionIntervalId&&(clearInterval(this.checkConnectionIntervalId),this.checkConnectionIntervalId=null)},O.prototype.clearMaxConnectTimeout=function(){this.maxConnectTimeoutId&&(clearTimeout(this.maxConnectTimeoutId),this.maxConnectTimeoutId=null)},O.prototype.clearTryReconnectTimeout=function(){this.tryReconnectTimeoutId&&(clearTimeout(this.tryReconnectTimeoutId),this.tryReconnectTimeoutId=null)},O.prototype.clearInactivityTimeout=function(){this.inactivityTimeoutId&&(clearTimeout(this.inactivityTimeoutId),this.inactivityTimeoutId=null)},O.prototype.setInactivityTimeout=function(){var l=this;this.inactivityTimeout>0&&Object.keys(this.operations).length===0&&(this.inactivityTimeoutId=setTimeout(function(){Object.keys(l.operations).length===0&&l.close()},this.inactivityTimeout))},O.prototype.checkOperationOptions=function(l,f){var T=l.query,M=l.variables,I=l.operationName;if(!T)throw new Error("Must provide a query.");if(!f)throw new Error("Must provide an handler.");if(!(0,u.default)(T)&&!(0,A.getOperationAST)(T,I)||I&&!(0,u.default)(I)||M&&!(0,k.default)(M))throw new Error("Incorrect option types. query must be a string or a document,`operationName` must be a string, and `variables` must be an object.")},O.prototype.buildMessage=function(l,f,T){var M=T&&T.query?d(d({},T),{query:typeof T.query=="string"?T.query:(0,U.print)(T.query)}):T;return{id:l,type:f,payload:M}},O.prototype.formatErrors=function(l){return Array.isArray(l)?l:l&&l.errors?this.formatErrors(l.errors):l&&l.message?[l]:[{name:"FormatedError",message:"Unknown error",originalError:l}]},O.prototype.sendMessage=function(l,f,T){this.sendMessageRaw(this.buildMessage(l,f,T))},O.prototype.sendMessageRaw=function(l){switch(this.status){case this.wsImpl.OPEN:var f=JSON.stringify(l);try{JSON.parse(f)}catch{this.eventEmitter.emit("error",new Error("Message must be JSON-serializable. Got: "+l))}this.client.send(f);break;case this.wsImpl.CONNECTING:this.unsentMessagesQueue.push(l);break;default:this.reconnecting||this.eventEmitter.emit("error",new Error("A message was not sent because socket is not connected, is closing or is already closed. Message was: "+JSON.stringify(l)))}},O.prototype.generateOperationId=function(){return String(++this.nextOperationId)},O.prototype.tryReconnect=function(){var l=this;if(!(!this.reconnect||this.backoff.attempts>=this.reconnectionAttempts)){this.reconnecting||(Object.keys(this.operations).forEach(function(T){l.unsentMessagesQueue.push(l.buildMessage(T,y.default.GQL_START,l.operations[T].options))}),this.reconnecting=!0),this.clearTryReconnectTimeout();var f=this.backoff.duration();this.tryReconnectTimeoutId=setTimeout(function(){l.connect()},f)}},O.prototype.flushUnsentMessagesQueue=function(){var l=this;this.unsentMessagesQueue.forEach(function(f){l.sendMessageRaw(f)}),this.unsentMessagesQueue=[]},O.prototype.checkConnection=function(){if(this.wasKeepAliveReceived){this.wasKeepAliveReceived=!1;return}this.reconnecting||this.close(!1,!0)},O.prototype.checkMaxConnectTimeout=function(){var l=this;this.clearMaxConnectTimeout(),this.maxConnectTimeoutId=setTimeout(function(){l.status!==l.wsImpl.OPEN&&(l.reconnecting=!0,l.close(!1,!0))},this.maxConnectTimeGenerator.duration())},O.prototype.connect=function(){var l,f=this;this.client=new((l=this.wsImpl).bind.apply(l,P([void 0,this.url,this.wsProtocols],this.wsOptionArguments,!1))),this.checkMaxConnectTimeout(),this.client.onopen=function(){return L(f,void 0,void 0,function(){var T,M;return j(this,function(I){switch(I.label){case 0:if(this.status!==this.wsImpl.OPEN)return[3,4];this.clearMaxConnectTimeout(),this.closedByUser=!1,this.eventEmitter.emit(this.reconnecting?"reconnecting":"connecting"),I.label=1;case 1:return I.trys.push([1,3,,4]),[4,this.connectionParams()];case 2:return T=I.sent(),this.sendMessage(void 0,y.default.GQL_CONNECTION_INIT,T),this.flushUnsentMessagesQueue(),[3,4];case 3:return M=I.sent(),this.sendMessage(void 0,y.default.GQL_CONNECTION_ERROR,M),this.flushUnsentMessagesQueue(),[3,4];case 4:return[2]}})})},this.client.onclose=function(){f.closedByUser||f.close(!1,!1)},this.client.onerror=function(T){f.eventEmitter.emit("error",T)},this.client.onmessage=function(T){var M=T.data;f.processReceivedData(M)}},O.prototype.processReceivedData=function(l){var f,T;try{f=JSON.parse(l),T=f.id}catch{throw new Error("Message must be JSON-parseable. Got: "+l)}if([y.default.GQL_DATA,y.default.GQL_COMPLETE,y.default.GQL_ERROR].indexOf(f.type)!==-1&&!this.operations[T]){this.unsubscribe(T);return}switch(f.type){case y.default.GQL_CONNECTION_ERROR:this.connectionCallback&&this.connectionCallback(f.payload);break;case y.default.GQL_CONNECTION_ACK:this.eventEmitter.emit(this.reconnecting?"reconnected":"connected",f.payload),this.reconnecting=!1,this.backoff.reset(),this.maxConnectTimeGenerator.reset(),this.connectionCallback&&this.connectionCallback();break;case y.default.GQL_COMPLETE:var M=this.operations[T].handler;delete this.operations[T],M.call(this,null,null);break;case y.default.GQL_ERROR:this.operations[T].handler(this.formatErrors(f.payload),null),delete this.operations[T];break;case y.default.GQL_DATA:var I=f.payload.errors?d(d({},f.payload),{errors:this.formatErrors(f.payload.errors)}):f.payload;this.operations[T].handler(null,I);break;case y.default.GQL_CONNECTION_KEEP_ALIVE:var J=typeof this.wasKeepAliveReceived>"u";this.wasKeepAliveReceived=!0,J&&this.checkConnection(),this.checkConnectionIntervalId&&(clearInterval(this.checkConnectionIntervalId),this.checkConnection()),this.checkConnectionIntervalId=setInterval(this.checkConnection.bind(this),this.wsTimeout);break;default:throw new Error("Invalid message type!")}},O.prototype.unsubscribe=function(l){this.operations[l]&&(delete this.operations[l],this.setInactivityTimeout(),this.sendMessage(l,y.default.GQL_STOP,void 0))},O}();b.SubscriptionClient=g},35345:(W,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.WS_TIMEOUT=b.MIN_WS_TIMEOUT=void 0;var r=1e3;b.MIN_WS_TIMEOUT=r;var d=3e4;b.WS_TIMEOUT=d},16664:(W,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});var r=function(){function d(){throw new Error("Static Class")}return d.GQL_CONNECTION_INIT="connection_init",d.GQL_CONNECTION_ACK="connection_ack",d.GQL_CONNECTION_ERROR="connection_error",d.GQL_CONNECTION_KEEP_ALIVE="ka",d.GQL_CONNECTION_TERMINATE="connection_terminate",d.GQL_START="start",d.GQL_DATA="data",d.GQL_ERROR="error",d.GQL_COMPLETE="complete",d.GQL_STOP="stop",d.SUBSCRIPTION_START="subscription_start",d.SUBSCRIPTION_DATA="subscription_data",d.SUBSCRIPTION_SUCCESS="subscription_success",d.SUBSCRIPTION_FAIL="subscription_fail",d.SUBSCRIPTION_END="subscription_end",d.INIT="init",d.INIT_SUCCESS="init_success",d.INIT_FAIL="init_fail",d.KEEP_ALIVE="keepalive",d}();b.default=r},42063:(W,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.GRAPHQL_SUBSCRIPTIONS=b.GRAPHQL_WS=void 0;var r="graphql-ws";b.GRAPHQL_WS=r;var d="graphql-subscriptions";b.GRAPHQL_SUBSCRIPTIONS=d},52833:(W,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});function r(d){return d!==null&&typeof d=="object"}b.default=r},43211:(W,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});function r(d){return typeof d=="string"}b.default=r},44085:(W,b,r)=>{"use strict";r.r(b),r.d(b,{default:()=>P});function d(h){var E,o=h.Symbol;return typeof o=="function"?o.observable?E=o.observable:(E=o("observable"),o.observable=E):E="@@observable",E}W=r.hmd(W);var L;typeof self<"u"?L=self:typeof window<"u"?L=window:typeof r.g<"u"?L=r.g:L=W;var j=d(L);const P=j},91348:(W,b,r)=>{"use strict";const{asciiLowercase:d,solelyContainsHTTPTokenCodePoints:L,soleyContainsHTTPQuotedStringTokenCodePoints:j}=r(88241);W.exports=class{constructor(h){this._map=h}get size(){return this._map.size}get(h){return h=d(String(h)),this._map.get(h)}has(h){return h=d(String(h)),this._map.has(h)}set(h,E){if(h=d(String(h)),E=String(E),!L(h))throw new Error(`Invalid MIME type parameter name "${h}": only HTTP token code points are valid.`);if(!j(E))throw new Error(`Invalid MIME type parameter value "${E}": only HTTP quoted-string token code points are valid.`);return this._map.set(h,E)}clear(){this._map.clear()}delete(h){return h=d(String(h)),this._map.delete(h)}forEach(h,E){this._map.forEach(h,E)}keys(){return this._map.keys()}values(){return this._map.values()}entries(){return this._map.entries()}[Symbol.iterator](){return this._map[Symbol.iterator]()}}},92823:(W,b,r)=>{"use strict";const d=r(91348),L=r(57709),j=r(46674),{asciiLowercase:P,solelyContainsHTTPTokenCodePoints:h}=r(88241);W.exports=class{constructor(o){o=String(o);const p=L(o);if(p===null)throw new Error(`Could not parse MIME type string "${o}"`);this._type=p.type,this._subtype=p.subtype,this._parameters=new d(p.parameters)}static parse(o){try{return new this(o)}catch{return null}}get essence(){return`${this.type}/${this.subtype}`}get type(){return this._type}set type(o){if(o=P(String(o)),o.length===0)throw new Error("Invalid type: must be a non-empty string");if(!h(o))throw new Error(`Invalid type ${o}: must contain only HTTP token code points`);this._type=o}get subtype(){return this._subtype}set subtype(o){if(o=P(String(o)),o.length===0)throw new Error("Invalid subtype: must be a non-empty string");if(!h(o))throw new Error(`Invalid subtype ${o}: must contain only HTTP token code points`);this._subtype=o}get parameters(){return this._parameters}toString(){return j(this)}isJavaScript({prohibitParameters:o=!1}={}){switch(this._type){case"text":switch(this._subtype){case"ecmascript":case"javascript":case"javascript1.0":case"javascript1.1":case"javascript1.2":case"javascript1.3":case"javascript1.4":case"javascript1.5":case"jscript":case"livescript":case"x-ecmascript":case"x-javascript":return!o||this._parameters.size===0;default:return!1}case"application":switch(this._subtype){case"ecmascript":case"javascript":case"x-ecmascript":case"x-javascript":return!o||this._parameters.size===0;default:return!1}default:return!1}}isXML(){return this._subtype==="xml"&&(this._type==="text"||this._type==="application")||this._subtype.endsWith("+xml")}isHTML(){return this._subtype==="html"&&this._type==="text"}}},57709:(W,b,r)=>{"use strict";const{removeLeadingAndTrailingHTTPWhitespace:d,removeTrailingHTTPWhitespace:L,isHTTPWhitespaceChar:j,solelyContainsHTTPTokenCodePoints:P,soleyContainsHTTPQuotedStringTokenCodePoints:h,asciiLowercase:E,collectAnHTTPQuotedString:o}=r(88241);W.exports=p=>{p=d(p);let u=0,k="";for(;u<p.length&&p[u]!=="/";)k+=p[u],++u;if(k.length===0||!P(k)||u>=p.length)return null;++u;let U="";for(;u<p.length&&p[u]!==";";)U+=p[u],++u;if(U=L(U),U.length===0||!P(U))return null;const A={type:E(k),subtype:E(U),parameters:new Map};for(;u<p.length;){for(++u;j(p[u]);)++u;let n="";for(;u<p.length&&p[u]!==";"&&p[u]!=="=";)n+=p[u],++u;if(n=E(n),u<p.length){if(p[u]===";")continue;++u}let t=null;if(p[u]==='"')for([t,u]=o(p,u);u<p.length&&p[u]!==";";)++u;else{for(t="";u<p.length&&p[u]!==";";)t+=p[u],++u;if(t=L(t),t==="")continue}n.length>0&&P(n)&&h(t)&&!A.parameters.has(n)&&A.parameters.set(n,t)}return A}},46674:(W,b,r)=>{"use strict";const{solelyContainsHTTPTokenCodePoints:d}=r(88241);W.exports=L=>{let j=`${L.type}/${L.subtype}`;if(L.parameters.size===0)return j;for(let[P,h]of L.parameters)j+=";",j+=P,j+="=",(!d(h)||h.length===0)&&(h=h.replace(/(["\\])/ug,"\\$1"),h=`"${h}"`),j+=h;return j}},88241:(W,b)=>{"use strict";b.removeLeadingAndTrailingHTTPWhitespace=r=>r.replace(/^[ \t\n\r]+/u,"").replace(/[ \t\n\r]+$/u,""),b.removeTrailingHTTPWhitespace=r=>r.replace(/[ \t\n\r]+$/u,""),b.isHTTPWhitespaceChar=r=>r===" "||r==="	"||r===`
`||r==="\r",b.solelyContainsHTTPTokenCodePoints=r=>/^[-!#$%&'*+.^_`|~A-Za-z0-9]*$/u.test(r),b.soleyContainsHTTPQuotedStringTokenCodePoints=r=>/^[\t\u0020-\u007E\u0080-\u00FF]*$/u.test(r),b.asciiLowercase=r=>r.replace(/[A-Z]/ug,d=>d.toLowerCase()),b.collectAnHTTPQuotedString=(r,d)=>{let L="";for(d++;;){for(;d<r.length&&r[d]!=='"'&&r[d]!=="\\";)L+=r[d],++d;if(d>=r.length)break;const j=r[d];if(++d,j==="\\"){if(d>=r.length){L+="\\";break}L+=r[d],++d}else break}return[L,d]}}}]);
